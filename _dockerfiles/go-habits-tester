FROM golang:1.10 AS builder

WORKDIR $GOPATH/src/github.com/8Mobius8/go-habits
COPY Gopkg.toml Gopkg.lock  Makefile ./

RUN make install-reporter install-dep install-test
RUN make dep-vendor-only

COPY . ./

RUN make go-build
RUN make install